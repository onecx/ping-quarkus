version: '2.4'

services:
  mocking-server:
    container_name: mocking-server
    image: artefactsdigi.1000kit.org/1000kit/mocking-server:latest
    labels:
      - "test.priority=100"
      - "test.log=true"
      - "test.Wait.forLogMessage.regex=.*verbose:.*\\s"
      - "test.Wait.forLogMessage.times=1"
      - "test.property.workorderclient/mp-rest/url=http://$${host:mocking-server}:$${port:mocking-server:8080}"
    ports:
      - "9000:8080"
    networks:
      - test
  ping-quarkus:
      container_name: ping-quarkus
      image: ping-quarkus:latest
      ports:
          - "8080:8080"
      labels:
          - "test.unit=false"
          - "test.priority=101"
          - "test.image.pull=DEFAULT"
          - "test.Wait.forLogMessage.regex=.*Installed features:.*"
          - "test.Wait.forLogMessage.times=1"
          - "test.log=true"
          - "test.env.WORKORDERCLIENT_MP_REST_URL=http://mocking-server:8080"
      networks:
          - test
networks:
  test: